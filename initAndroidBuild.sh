#!/bin/bash
mkdir $( pwd; )/android/fastlane
echo "======================================================================================================"
echo "Copy Android Files"
echo "======================================================================================================"
cp ./exampleFiles/build.gradle.example.android $( pwd; )/android/
mv $( pwd; )/android/build.gradle.example.android $( pwd; )/android/build.gradle
echo "======================================================================================================"
cp ./exampleFiles/build.gradle.example.android.app $( pwd; )/android/app/
mv $( pwd; )/android/app/build.gradle.example.android.app $( pwd; )/android/app/build.gradle
echo "======================================================================================================"
echo "Copied Android to destination"
echo "======================================================================================================"
echo "======================================================================================================"
echo "Copy Fastlane Config"
echo "======================================================================================================"
cp ./exampleFiles/Appfile.example $( pwd; )/android/fastlane
mv $( pwd; )./android/fastlane/Appfile.example $( pwd; )/android/fastlane/Appfile
cp ./exampleFiles/Fastfile.example $( pwd; )/android/fastlane
echo "======================================================================================================"
mv $( pwd; )/android/fastlane/Fastfile.example $( pwd; )/android/fastlane/Fastfile
cp ./exampleFiles/Gemfile.example $( pwd; )/android
mv $( pwd; )/android/Gemfile.example $( pwd; )/android/Gemfile
echo "======================================================================================================"
echo "Copied fastlane files to destination!"
echo "======================================================================================================"
echo "======================================================================================================"
echo "Download 'google-services.json' from firebase console account and put it into '~/android/app' folder!"
echo "======================================================================================================"
echo "======================================================================================================"
echo "Build Android with : './android/gradlew build'"
echo "======================================================================================================"
echo "======================================================================================================"
echo "Fastlane Deploy Init and Configure"
echo "======================================================================================================"
fastlane init
sudo fastlane add_plugin firebase_app_distribution
echo "======================================================================================================"
echo "Download 'firebase_credentials.json' from firebase service worker account!"
echo "======================================================================================================"
echo "======================================================================================================"
echo "Copy 'firebase_credentials.json' to '~/android/ folder manually!" 
echo "======================================================================================================"
echo "======================================================================================================"
echo "Start to Deploy Android App to firebase with:" 
echo "======================================================================================================"
echo "======================================================================================================"
echo "'fastlane distribute " 
echo "======================================================================================================"
